{"file":"/Users/zfkc/Desktop/03-移动端项目/taro-bluetooth-print/tests/qr.test.ts","mappings":";;AACA,+BAAmC;AACnC,MAAM,CAAC,WAAW,GAAG,kBAAkB,CAAC;AAExC,kDAA+C;AAG/C,oFAAoF;AACpF,kDAAkD;AAClD,6DAA6D;AAC7D,yEAAyE;AAEzE,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE;IACzB,MAAM,MAAM,GAAG,IAAI,eAAM,EAAE,CAAC;IAE5B,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE;QAC7D,MAAM,OAAO,GAAG,OAAO,CAAC;QACxB,MAAM,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAEpC,oBAAoB;QACpB,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEhC,uDAAuD;QACvD,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/F,kDAAkD;QAClD,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAE3F,+DAA+D;QAC/D,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAE5F,uBAAuB;QACvB,kCAAkC;QAClC,kBAAkB;QAClB,mCAAmC;QACnC,MAAM,MAAM,GAAG,IAAI,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QAC1E,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEpC,wBAAwB;QACxB,8DAA8D;QAC9D,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QAE9D,kBAAkB;QAClB,wBAAwB;QACxB,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/zfkc/Desktop/03-移动端项目/taro-bluetooth-print/tests/qr.test.ts"],"sourcesContent":["\nimport { TextEncoder } from 'util';\nglobal.TextEncoder = TextEncoder as any;\n\nimport { EscPos } from '../src/drivers/EscPos';\nimport { Encoding } from '../src/utils/encoding';\n\n// Mock Encoding since it might depend on TextEncoder which is available in Node 11+\n// But let's assume it works or mock it if needed.\n// Actually, let's check src/utils/encoding.ts content first?\n// I haven't read it yet. Let's assume it works or read it if test fails.\n\ndescribe('EscPos QR', () => {\n  const driver = new EscPos();\n\n  test('qr generates correct commands for default options', () => {\n    const content = '12345';\n    const commands = driver.qr(content);\n\n    // Expect 6 commands\n    expect(commands.length).toBe(6);\n\n    // 1. Model: GS ( k 04 00 31 41 50 00 (Model 2 default)\n    expect(commands[0]).toEqual(new Uint8Array([0x1D, 0x28, 0x6B, 0x04, 0x00, 0x31, 0x41, 50, 0]));\n\n    // 2. Size: GS ( k 03 00 31 43 06 (Size 6 default)\n    expect(commands[1]).toEqual(new Uint8Array([0x1D, 0x28, 0x6B, 0x03, 0x00, 0x31, 0x43, 6]));\n\n    // 3. Error Correction: GS ( k 03 00 31 45 49 (Level M default)\n    expect(commands[2]).toEqual(new Uint8Array([0x1D, 0x28, 0x6B, 0x03, 0x00, 0x31, 0x45, 49]));\n\n    // 4. Store Data Header\n    // Length of '12345' is 5. +3 = 8.\n    // pL = 8, pH = 0.\n    // GS ( k 08 00 31 50 30 ...data...\n    const header = new Uint8Array([0x1D, 0x28, 0x6B, 8, 0, 0x31, 0x50, 0x30]);\n    expect(commands[3]).toEqual(header);\n\n    // 5. Store Data Content\n    // '12345' encoded to UTF-8 (fallback) is [49, 50, 51, 52, 53]\n    expect(Array.from(commands[4])).toEqual([49, 50, 51, 52, 53]);\n\n    // 6. Print Symbol\n    // GS ( k 03 00 31 51 30\n    expect(commands[5]).toEqual(new Uint8Array([0x1D, 0x28, 0x6B, 0x03, 0x00, 0x31, 0x51, 0x30]));\n  });\n});\n"],"version":3}